# üè™ TiendaF√°cil - Sistema Integral de Comercio Digital

<div align="center">

![TiendaF√°cil Logo](public/tienda_facil_logo.svg)

**Versi√≥n 1.1.10.3** | **Noviembre 2025**

*Sistema completo de Punto de Venta, Inventario y Comercio Electr√≥nico*

[![Next.js](https://img.shields.io/badge/Next.js-15.5.5-black?style=for-the-badge&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue?style=for-the-badge&logo=typescript)](https://www.typescriptlang.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-7.0-green?style=for-the-badge&logo=mongodb)](https://www.mongodb.com/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind-3.4-38B2AC?style=for-the-badge&logo=tailwind-css)](https://tailwindcss.com/)

---

### üè¢ **Desarrollado por Corporaci√≥n 1 Plus, C.A.**
*Soluciones tecnol√≥gicas empresariales de vanguardia*

</div>

## üåü **Descripci√≥n del Proyecto**

TiendaF√°cil es una plataforma integral de comercio digital desarrollada por **Corporaci√≥n 1 Plus, C.A.**, dise√±ada para revolucionar la gesti√≥n comercial de peque√±as y medianas empresas. Combina un sistema de punto de venta moderno, gesti√≥n de inventario inteligente, y un cat√°logo p√∫blico din√°mico en una sola aplicaci√≥n web de alto rendimiento.

### üéØ **Misi√≥n**
Democratizar el acceso a tecnolog√≠a comercial avanzada, permitiendo que cualquier negocio pueda competir en el mercado digital con herramientas profesionales y accesibles.

## ‚ú® **Caracter√≠sticas Principales**

### üè™ **Sistema de Punto de Venta (POS)**
- **Interfaz Moderna**: Dise√±o intuitivo optimizado para velocidad de venta
- **M√∫ltiples M√©todos de Pago**: Efectivo, tarjetas, transferencias
- **Gesti√≥n de Clientes**: Base de datos integrada de clientes
- **Impresi√≥n de Tickets**: Tickets personalizables con logo y datos de la empresa
- **Sesiones de Caja**: Control completo de apertura/cierre de caja

### üì¶ **Gesti√≥n de Inventario Inteligente**
- **Control de Stock en Tiempo Real**: Actualizaciones autom√°ticas
- **Categorizaci√≥n Avanzada**: Familias, unidades, almacenes personalizables
- **C√≥digos de Barras**: Soporte completo para lectura y generaci√≥n
- **Alertas de Stock**: Notificaciones autom√°ticas de productos bajos
- **Movimientos Detallados**: Historial completo de entradas y salidas
- **Galer√≠a Multi-Im√°genes**: Sistema completo de gesti√≥n de m√∫ltiples im√°genes por producto
- **Stock Inicial Preciso**: Correcci√≥n autom√°tica de inventario al crear productos nuevos

### üåê **Cat√°logo P√∫blico Digital**
- **Vitrina Online**: Cat√°logo p√∫blico accesible 24/7
- **Modo Visor Autom√°tico**: Scroll autom√°tico para displays
- **Pedidos por QR**: Generaci√≥n autom√°tica de c√≥digos QR para pedidos
- **Responsive Design**: Optimizado para todos los dispositivos
- **Publicidad Integrada**: Sistema de anuncios segmentados

### üìä **Dashboard y Reportes**
- **M√©tricas en Tiempo Real**: Ventas, inventario, clientes
- **Gr√°ficos Interactivos**: Visualizaci√≥n de datos con Recharts
- **Reportes Personalizables**: Exportaci√≥n en m√∫ltiples formatos
- **An√°lisis de Tendencias**: Insights autom√°ticos de ventas

### üîê **Seguridad y Control de Acceso**
- **Sistema de Roles**: 6 niveles de acceso (Guest, User, Depositary, POS, Admin, SuperUser)
- **Autenticaci√≥n Robusta**: Sistema de login seguro con cambio autom√°tico de contexto
- **Visibilidad de Contrase√±a**: Toggle para mostrar/ocultar contrase√±a en login y registro
- **PIN de Seguridad**: Protecci√≥n adicional para operaciones cr√≠ticas
- **Auditor√≠a Completa**: Logs de todas las operaciones
- **Validaci√≥n de Contexto**: Verificaci√≥n autom√°tica de permisos por tienda

### üè¢ **Administraci√≥n Multi-Tienda**
- **Panel de Super Administrador**: Gesti√≥n centralizada de m√∫ltiples tiendas
- **Estad√≠sticas Globales**: M√©tricas consolidadas de todas las tiendas
- **Control de Estados**: Activaci√≥n/desactivaci√≥n de tiendas
- **Modo Producci√≥n**: Transici√≥n autom√°tica de demo a producci√≥n
- **Promoci√≥n de Usuarios**: Conversi√≥n autom√°tica de usuarios a administradores
- **Creaci√≥n Autom√°tica**: Seeding completo de nuevas tiendas

### üí∞ **Sistema de Monedas Dual**
- **Moneda Principal y Secundaria**: Soporte completo para dos monedas
- **Cambio Din√°mico**: Intercambio instant√°neo entre monedas
- **Tasas de Cambio**: Actualizaci√≥n manual de tasas con validaci√≥n temporal
- **Interfaz Intuitiva**: Bot√≥n de intercambio que muestra la moneda opuesta
- **Actualizaci√≥n Autom√°tica**: Todos los precios se actualizan al cambiar moneda

## üöÄ **Nuevas Caracter√≠sticas - Versi√≥n 1.1.10.3**

### ‚ú® **Funcionalidades Reci√©n Agregadas**

#### üñºÔ∏è **Sistema Multi-Im√°genes para Productos**
- **Galer√≠a de Im√°genes**: Soporte completo para m√∫ltiples im√°genes por producto
- **Gesti√≥n Visual**: Interfaz intuitiva para agregar, reordenar y eliminar im√°genes
- **Vista Previa Avanzada**: Carrusel de im√°genes con navegaci√≥n fluida
- **Imagen Principal**: Selecci√≥n autom√°tica de la primera imagen como principal
- **Optimizaci√≥n de Carga**: Lazy loading y compresi√≥n autom√°tica de im√°genes
- **Responsive Design**: Galer√≠a adaptativa para todos los dispositivos

#### üîê **Funcionalidad de Mostrar/Ocultar Contrase√±a**
- **Toggle Visual**: Bot√≥n con iconos Eye/EyeOff para alternar visibilidad
- **Modal de Login**: Funcionalidad integrada en el formulario de inicio de sesi√≥n
- **Modal de Registro**: Disponible tambi√©n en el formulario de registro
- **UX Mejorada**: Reducci√≥n de errores de entrada de contrase√±a
- **Accesibilidad**: Navegaci√≥n por teclado y estados de focus mejorados

#### üì¶ **Correcci√≥n de Inventario Inicial**
- **Stock Inicial Preciso**: Correcci√≥n del c√°lculo de inventario al crear productos nuevos
- **Movimientos Correctos**: Registro preciso de movimientos de inventario inicial
- **Flujo Optimizado**: Creaci√≥n de productos con stock 0 inicial y posterior ajuste
- **Consistencia de Datos**: Eliminaci√≥n de duplicaci√≥n de stock en productos nuevos
- **Historial Preciso**: Movimientos de inventario que reflejan correctamente los cambios

### ‚ú® **Funcionalidades Anteriores**

#### üë• **Sistema Avanzado de Gesti√≥n de Usuarios**
- **Promoci√≥n Autom√°tica de Usuarios**: Conversi√≥n de usuarios regulares a administradores con creaci√≥n autom√°tica de tienda
- **Modal de Promoci√≥n Inteligente**: Interfaz intuitiva con datos pre-llenados y validaci√≥n autom√°tica
- **Creaci√≥n y Seeding Autom√°tico**: Generaci√≥n completa de tienda con datos iniciales y cambio de contexto autom√°tico
- **Gesti√≥n de Roles Mejorada**: Sistema refinado de permisos y accesos por rol
- **Edici√≥n de Usuarios**: Modal completo para modificar informaci√≥n de usuarios existentes

#### üè™ **M√≥dulo de Administraci√≥n de Tiendas**
- **Dashboard Ejecutivo**: Tarjetas con estad√≠sticas de todas las tiendas
- **Gesti√≥n Centralizada**: Tabla completa con informaci√≥n detallada
- **Filtros Avanzados**: B√∫squeda por estado, nombre, administrador
- **Vista Detallada**: Modal con informaci√≥n completa de cada tienda
- **Control de Estados**: Activar/desactivar tiendas con confirmaci√≥n

#### üéØ **Sistema de Solicitud de Tiendas Mejorado**
- **Bot√≥n Flotante Inteligente**: Interfaz estilo WhatsApp con visibilidad basada en roles
- **Estilo Visual Mejorado**: Gradiente naranja distintivo y animaciones suaves
- **Control de Visibilidad**: Solo visible para usuarios con rol "user" que no han solicitado tienda
- **Integraci√≥n con API**: Sincronizaci√≥n autom√°tica del estado de solicitud

#### üîê **Autenticaci√≥n y Contexto Mejorados**
- **Login Inteligente**: Cambio autom√°tico de tienda al hacer login con usuario de diferente tienda
- **Validaci√≥n de Contexto**: Verificaci√≥n autom√°tica del `activeStoreId` vs `storeId` del usuario
- **Redirecci√≥n Optimizada**: Navegaci√≥n autom√°tica al contexto correcto seg√∫n el rol del usuario
- **Sincronizaci√≥n de Estado**: Actualizaci√≥n autom√°tica del contexto de tienda tras login

#### üí∞ **Sistema de Monedas Mejorado**
- **Bot√≥n de Cambio Intuitivo**: Icono de intercambio (ArrowLeftRight) que muestra la moneda opuesta
- **S√≠mbolo Din√°mico**: Muestra el s√≠mbolo de la moneda inactiva para indicar hacia d√≥nde cambiar
- **Actualizaci√≥n Autom√°tica**: Todos los precios en carrito y pedidos se actualizan instant√°neamente
- **Tooltip Informativo**: Informaci√≥n clara sobre el cambio de moneda disponible

#### üñ•Ô∏è **Modo Visor Mejorado**
- **Scroll Autom√°tico**: Navegaci√≥n autom√°tica del cat√°logo
- **Control Manual**: Activaci√≥n/desactivaci√≥n con un clic
- **Indicadores Visuales**: Feedback claro del estado del modo visor
- **Optimizaci√≥n de Rendimiento**: Sin bucles infinitos ni memory leaks

#### üîß **Mejoras T√©cnicas Cr√≠ticas**
- **Correcci√≥n de Tipos**: Solucionados todos los errores de TypeScript para compilaci√≥n exitosa
- **Roles de Usuario**: Corregido tipo de rol de 'seller' a 'pos' para consistencia
- **Sistema de Toasts Mejorado**: Notificaciones elegantes sin romper el dise√±o
- **Navegaci√≥n Optimizada**: Redirecciones inteligentes sin bucles
- **Manejo de Errores**: Sistema robusto de recuperaci√≥n de errores

## üõ†Ô∏è **Stack Tecnol√≥gico**

### **Frontend**
- **Next.js 15.5.5**: Framework React con App Router
- **TypeScript 5.0**: Tipado est√°tico para mayor robustez
- **Tailwind CSS 3.4**: Framework de estilos utilitarios
- **ShadCN/UI**: Componentes de interfaz modernos
- **Lucide React**: Iconograf√≠a consistente y moderna

### **Backend**
- **MongoDB 7.0**: Base de datos NoSQL escalable
- **Next.js API Routes**: Endpoints RESTful integrados
- **Mongoose**: ODM para MongoDB con validaciones

### **Herramientas de Desarrollo**
- **ESLint**: Linting de c√≥digo
- **Prettier**: Formateo autom√°tico
- **Recharts**: Gr√°ficos y visualizaciones
- **React Hook Form**: Gesti√≥n de formularios
- **Zod**: Validaci√≥n de esquemas

## üìã **Requisitos del Sistema**

### **Desarrollo Local**
- **Node.js**: 18.0 o superior
- **npm**: 9.0 o superior
- **MongoDB**: 7.0 o superior (local o Atlas)
- **Memoria RAM**: M√≠nimo 4GB recomendado

### **Producci√≥n**
- **Vercel/Netlify**: Para despliegue frontend
- **MongoDB Atlas**: Base de datos en la nube
- **CDN**: Para assets est√°ticos (opcional)

## üöÄ **Instalaci√≥n y Configuraci√≥n**

### **1. Clonar el Repositorio**
```bash
git clone https://github.com/tu-usuario/tienda-facil.git
cd tienda-facil
```

### **2. Instalar Dependencias**
```bash
npm install
```

### **3. Configurar Variables de Entorno**
```bash
cp .env.example .env.local
```

Editar `.env.local` con tus configuraciones:
```env
MONGODB_URI=mongodb://localhost:27017/tienda-facil
NEXTAUTH_SECRET=tu-secret-key
NEXTAUTH_URL=http://localhost:3000
```

### **4. Ejecutar en Desarrollo**
```bash
npm run dev
```

### **5. Acceder a la Aplicaci√≥n**
Abrir [http://localhost:3000](http://localhost:3000) en tu navegador

## üéØ **Caracter√≠sticas Destacadas v1.1.10.3**

### üñºÔ∏è **Sistema Multi-Im√°genes Avanzado**
La nueva funcionalidad de galer√≠a de im√°genes revoluciona la presentaci√≥n de productos:

1. **Gesti√≥n Visual**: Interfaz drag-and-drop para reordenar im√°genes
2. **Vista Previa**: Carrusel interactivo con navegaci√≥n por flechas y dots
3. **Optimizaci√≥n**: Compresi√≥n autom√°tica y lazy loading para mejor rendimiento
4. **Responsive**: Adaptaci√≥n autom√°tica a diferentes tama√±os de pantalla
5. **Accesibilidad**: Navegaci√≥n por teclado y lectores de pantalla

### üîê **Mejora en Experiencia de Usuario**
El sistema de contrase√±as ahora es m√°s amigable y seguro:

- **Toggle Intuitivo**: Iconos Eye/EyeOff universalmente reconocidos
- **Doble Implementaci√≥n**: Disponible en login y registro
- **Estado Persistente**: Mantiene la preferencia durante la sesi√≥n del modal
- **Accesibilidad**: Compatible con navegaci√≥n por teclado y lectores de pantalla
- **Feedback Visual**: Hover effects y estados de focus mejorados

### üì¶ **Inventario M√°s Preciso**
Correcci√≥n cr√≠tica en el manejo de stock inicial:

- **Flujo Corregido**: Creaci√≥n de productos con stock 0 inicial
- **Movimientos Precisos**: Registro correcto del inventario inicial
- **Eliminaci√≥n de Duplicaci√≥n**: No m√°s stock duplicado en productos nuevos
- **Consistencia**: Historial de movimientos que refleja la realidad
- **Confiabilidad**: Sistema m√°s robusto para el control de inventario

## üéØ **Caracter√≠sticas Destacadas Anteriores**

### üöÄ **Promoci√≥n Autom√°tica de Usuarios**
La nueva funcionalidad permite a los super usuarios convertir usuarios regulares en administradores de tienda de manera autom√°tica:

1. **Selecci√≥n de Usuario**: Desde el panel de usuarios, seleccionar "Promover a Admin"
2. **Modal Inteligente**: Se abre un formulario con datos pre-llenados del usuario
3. **Creaci√≥n Autom√°tica**: Se crea la tienda con seeding completo de datos iniciales
4. **Cambio de Contexto**: El sistema cambia autom√°ticamente al contexto de la nueva tienda
5. **Notificaci√≥n**: Confirmaci√≥n visual del proceso completado

### üí± **Sistema de Monedas Mejorado**
El bot√≥n de cambio de moneda ahora es m√°s intuitivo y funcional:

- **Icono Intuitivo**: ArrowLeftRight en lugar del s√≠mbolo de d√≥lar
- **S√≠mbolo Opuesto**: Muestra hacia qu√© moneda se va a cambiar
- **Actualizaci√≥n Instant√°nea**: Todos los precios se actualizan autom√°ticamente
- **Tooltip Informativo**: Informaci√≥n clara sobre la acci√≥n disponible

### üîê **Login Inteligente**
El sistema de autenticaci√≥n ahora maneja autom√°ticamente el cambio de contexto:

- **Detecci√≥n Autom√°tica**: Identifica si el usuario pertenece a una tienda diferente
- **Cambio de Contexto**: Actualiza autom√°ticamente el `activeStoreId`
- **Redirecci√≥n Inteligente**: Navega al dashboard apropiado seg√∫n el rol
- **Sincronizaci√≥n**: Mantiene consistencia entre contextos de auth y settings

## üåê **Despliegue en Producci√≥n**

### **Vercel (Recomendado)**
```bash
# Conectar con Vercel
vercel

# Configurar variables de entorno en Vercel Dashboard
# Desplegar
vercel --prod
```

### **Docker**
```bash
# Construir imagen
docker build -t tienda-facil .

# Ejecutar contenedor
docker run -p 3000:3000 tienda-facil
```

## üìö **Documentaci√≥n de API**

### **Endpoints Principales**

#### **Productos**
- `GET /api/products` - Listar productos
- `POST /api/products` - Crear producto
- `PUT /api/products` - Actualizar producto
- `DELETE /api/products` - Eliminar producto

#### **Ventas**
- `GET /api/sales` - Listar ventas
- `POST /api/sales` - Registrar venta
- `PUT /api/sales` - Actualizar venta

#### **Administraci√≥n**
- `GET /api/stores-admin` - Listar todas las tiendas
- `GET /api/stores-admin/stats` - Estad√≠sticas globales
- `PUT /api/stores-admin/status` - Cambiar estado de tienda

## üë• **Roles y Permisos**

| Rol | Cat√°logo | Productos | Inventario | POS | Compras | Cr√©ditos | Dashboard | Admin | Promoci√≥n |
|-----|----------|-----------|------------|-----|---------|----------|-----------|-------|-----------|
| **Guest** | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **User** | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **Depositary** | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **POS** | ‚úÖ | ‚ùå | ‚ùå | ‚úÖ | ‚ùå | ‚ùå | ‚ùå | ‚ùå | ‚ùå |
| **Admin** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚ùå | ‚ùå |
| **SuperUser** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |

## üîÑ **Changelog - Versi√≥n 1.1.10.3**

### ‚ú® **Nuevas Caracter√≠sticas**
- **Sistema Multi-Im√°genes**: Galer√≠a completa de im√°genes para productos con gesti√≥n visual
- **Carrusel de Im√°genes**: Vista previa interactiva con navegaci√≥n fluida
- **Gesti√≥n de Galer√≠a**: Interfaz drag-and-drop para reordenar y eliminar im√°genes
- **Toggle de Contrase√±a**: Funcionalidad mostrar/ocultar en modales de login y registro
- **Iconos Intuitivos**: Eye/EyeOff de Lucide React para mejor UX
- **Optimizaci√≥n de Im√°genes**: Lazy loading y compresi√≥n autom√°tica

### üêõ **Correcciones Cr√≠ticas**
- **Stock Inicial Duplicado**: Corregido problema de inventario duplicado al crear productos
- **Flujo de Inventario**: Optimizado proceso de creaci√≥n con stock inicial preciso
- **Movimientos de Inventario**: Registro correcto de previousStock y newStock
- **Consistencia de Datos**: Eliminaci√≥n de discrepancias en historial de movimientos
- **C√°lculo de Stock**: Correcci√≥n en la l√≥gica de MovementService para productos nuevos

### ‚ö° **Optimizaciones T√©cnicas**
- **Rendimiento de Im√°genes**: Carga optimizada con lazy loading
- **Gesti√≥n de Estado**: Mejor manejo del estado de visibilidad de contrase√±a
- **Flujo de Creaci√≥n**: Proceso optimizado para productos con inventario inicial
- **Validaci√≥n de Datos**: Verificaci√≥n mejorada de stock y movimientos
- **Experiencia de Usuario**: Interfaces m√°s fluidas y responsivas

### üé® **Mejoras de Interfaz**
- **Galer√≠a Visual**: Dise√±o elegante para m√∫ltiples im√°genes de productos
- **Navegaci√≥n Intuitiva**: Controles claros para carrusel de im√°genes
- **Botones de Contrase√±a**: Posicionamiento y estilo mejorados
- **Feedback Visual**: Indicadores claros de estado y acciones disponibles
- **Responsive Design**: Adaptaci√≥n perfecta a todos los dispositivos

### üìã **Changelog Anterior - Versi√≥n 1.10.23.1**

#### ‚ú® **Caracter√≠sticas Anteriores**
- **Sistema de Promoci√≥n de Usuarios**: Conversi√≥n autom√°tica de usuarios a administradores con creaci√≥n de tienda
- **Modal de Promoci√≥n Inteligente**: Interfaz completa con validaci√≥n y datos pre-llenados
- **Creaci√≥n Autom√°tica de Tiendas**: Seeding completo con datos iniciales y cambio de contexto
- **Gesti√≥n Avanzada de Usuarios**: Edici√≥n completa de perfiles y roles de usuario
- **Login Inteligente**: Cambio autom√°tico de contexto de tienda seg√∫n el usuario
- **Bot√≥n de Moneda Mejorado**: Icono de intercambio que muestra la moneda opuesta
- **Actualizaci√≥n Din√°mica de Precios**: Cambio autom√°tico de s√≠mbolos en carrito y pedidos
- **M√≥dulo de Administraci√≥n de Tiendas**: Panel completo para super usuarios
- **Bot√≥n Flotante de Solicitud**: Sistema de registro integrado con estilo mejorado
- **Modo Visor Autom√°tico**: Scroll autom√°tico del cat√°logo

## ü§ù **Contribuci√≥n**

### **Proceso de Contribuci√≥n**
1. Fork del repositorio
2. Crear rama feature (`git checkout -b feature/nueva-caracteristica`)
3. Commit cambios (`git commit -am 'Agregar nueva caracter√≠stica'`)
4. Push a la rama (`git push origin feature/nueva-caracteristica`)
5. Crear Pull Request

### **Est√°ndares de C√≥digo**
- **ESLint**: Seguir las reglas configuradas
- **TypeScript**: Tipado estricto obligatorio
- **Commits**: Usar Conventional Commits
- **Testing**: Incluir tests para nuevas caracter√≠sticas

## üìÑ **Licencia**

Este proyecto es propiedad de **Corporaci√≥n 1 Plus, C.A.** y est√° protegido por derechos de autor. El uso, distribuci√≥n o modificaci√≥n requiere autorizaci√≥n expresa.

## üìû **Soporte y Contacto**

### **Corporaci√≥n 1 Plus, C.A.**
- **Email**: corporacion1plus@gmail.com
- **Tel√©fono**: +58 (412) 691-5593
- **Sitio Web**: www.corporacion1plus.com
- **Direcci√≥n**: Maracaibo, Venezuela

### **Soporte T√©cnico**
- **Documentaci√≥n**: [docs.tiendafacil.com](https://docs.tiendafacil.com)
- **Issues**: [GitHub Issues](https://github.com/tu-usuario/tienda-facil/issues)
- **Discord**: [Comunidad TiendaF√°cil](https://discord.gg/tiendafacil)

---

<div align="center">

**üöÄ TiendaF√°cil v1.1.10.3 - Impulsando el Comercio Digital**

*Desarrollado con ‚ù§Ô∏è por Corporaci√≥n 1 Plus, C.A.*

[![Corporaci√≥n 1 Plus](https://img.shields.io/badge/Corporaci√≥n%201%20Plus-Soluciones%20Empresariales-blue?style=for-the-badge)](https://corporacion1plus.com)

</div>